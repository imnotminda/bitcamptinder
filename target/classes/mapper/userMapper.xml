<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- <mapper namespace="userSQL"> -->
<mapper namespace="user.dao.UserDAO">

	<!-- 회원가입 -->

	<insert id="write" parameterType="UserDTO">
    INSERT INTO date_user (
        USER_USERNAME, USER_NAME, USER_PWD, USER_AGE, USER_GENDER,
        USER_EMAIL1, USER_EMAIL2, USER_TEL1, USER_TEL2, USER_TEL3,
        USER_SPORT, USER_ART, USER_FOOD, USER_MUSIC, USER_HOBBY,
        USER_TRAVEL, USER_SMOKE, USER_RELIGION, USER_MBTI,
        REG_DATE, PROFILE_PIC, USER_MOVIE
    ) VALUES (
        #{user_username}, #{user_name}, #{user_pwd}, #{user_age}, #{user_gender},
        #{user_email1}, #{user_email2}, #{user_tel1}, #{user_tel2}, #{user_tel3},
        #{user_sport}, #{user_art}, #{user_food}, #{user_music}, #{user_hobby},
        #{user_travel}, #{user_smoke}, #{user_religion}, #{user_mbti},
        CURRENT_TIMESTAMP, #{profile_pic}, #{user_movie}
    )

</insert>
	<!-- 중복 아이디 체크 -->
	<select id="checkId" parameterType="String" resultType="userDTO">
		select * from DATE_USER where user_username=#{user_username}
	</select>

	<!-- 회원 목록 가져오기 -->
	<select id="list" resultType="userDTO">
		select * from DATE_USER limit #{startNum}, #{endNum}
	</select>


	<!-- 회원정보 가져오기 -->
	<select id="getUser" parameterType="String" resultType="userDTO">
		SELECT * FROM DATE_USER WHERE USER_USERNAME = #{user_username}
	</select>

	<!-- 회원정보 수정 241017-->
	<update id="update" parameterType="user.bean.UserDTO">
    UPDATE DATE_USER SET 
    	USER_NAME = #{user_name},
        USER_PWD = #{user_pwd}, 
        USER_EMAIL1 = #{user_email1}, 
        USER_EMAIL2 = #{user_email2}, 
        USER_TEL1 = #{user_tel1}, 
        USER_TEL2 = #{user_tel2}, 
        USER_TEL3 = #{user_tel3}, 
        USER_SPORT = #{user_sport}, 
        USER_ART = #{user_art}, 
        USER_FOOD = #{user_food}, 
        USER_MUSIC = #{user_music}, 
        USER_HOBBY = #{user_hobby}, 
        USER_TRAVEL = #{user_travel}, 
        USER_SMOKE = #{user_smoke}, 
        USER_RELIGION = #{user_religion}, 
        USER_MBTI = #{user_mbti}, 
        USER_MOVIE = #{user_movie},
        REG_DATE = CURRENT_TIMESTAMP
    	WHERE USER_USERNAME = #{user_username} <!-- 아이디를 통해 특정 사용자 선택 -->
</update>

	<!-- 회원탈퇴 정보 확인 -->
	<select id="checkDeleteInfo" parameterType="String"
		resultType="UserDTO">
		SELECT * FROM DATE_USER WHERE username = #{username}
	</select>

	<!-- 회원정보 탈퇴 -->
	<delete id="delete" parameterType="String">
		DELETE FROM DATE_USER WHERE username=#{username}
	</delete>

	<!-- 회원 로그인 / 241016 오혜진 -->
	<select id="login" parameterType="map" resultType="userDTO">
		SELECT * FROM date_user WHERE USER_USERNAME = #{user_username} AND USER_PWD = #{user_pwd}
		
	</select>


</mapper>